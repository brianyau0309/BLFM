#!/bin/sh

div='|'

printNotification() {
  [ -f /tmp/.dunsttoggle ] && echo ðŸ”• || echo ðŸ””
}

printStorage() {
  df -h ~ | grep -v 'Filesystem' | awk '{ print "ïŸ‰ " $4 }'
}

printDate() {
  date '+ðŸ—“ %a %d-%b %H:%M:%S'
}

printAudio() {
  soundnum=$(echo $(amixer sget Master | grep 'Left:' | awk -F"[][]" '{ print $2 }') | sed 's/%//')
  amixer sget Master | grep off >/dev/null &&
    echo ðŸ”‡ ||
    ( ([ $soundnum -gt 80 ] && echo ðŸ”Š) ||
      ([ $soundnum -gt 20 ] && echo ðŸ”‰) ||
      echo ðŸ”ˆ )
}

statusBar() {
  printStorage
  echo 'ï–€ 90%'
  printDate
  printAudio
  printNotification
  echo ï‡«
}

while :; do
  xsetroot -name " $( statusBar | tr '\n' ' ')" #Change newline to space
  sleep 30
done
