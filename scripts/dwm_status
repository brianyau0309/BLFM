#!/bin/sh

div='|'

printNotification() {
  [ -f /tmp/.dunsttoggle ] && echo ðŸ”• || echo ðŸ””
}

printStorage() {
  df -h ~ | grep -v 'Filesystem' | awk '{ print "ïŸ‰ " $4 }'
}

printDate() {
  date '+ðŸ—“ %a %d-%b %H:%M:%S'
}

printAudio() {
  sound=$(amixer sget Master | grep 'Left:' | awk -F"[][]" '{ print $2 }')
  soundnum=$(echo $sound | sed 's/%//')
  amixer sget Master | grep off >/dev/null &&
    echo ðŸ”‡ ||
    ( ([ $soundnum -gt 66 ] && echo ðŸ”Š) ||
      ([ $soundnum -gt 33 ] && echo ðŸ”‰) ||
      echo ðŸ”ˆ )
  echo $sound
}

statusBar() {
  printStorage
  echo 'ï–€ 90%'
  echo 'ðŸŒž 50%'
  printAudio
  printDate
  printNotification
  echo ïª¨
}

while :; do
  xsetroot -name " $( statusBar | tr '\n' ' ')" #Change newline to space
  sleep 30
done
